<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../assets/styles/productpage.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
    <title>GeoInsight | Phulkari Saree</title>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script>
      function addToCart(productName, category, price,tinyImage) {
        $.ajax({
          type: 'POST',
          url: '../../backend/checkSession.php',  
          success: function(response) {
            if (response.sessionData.loggedIn) {
              addToCartInternal(productName, category, price,tinyImage);
            } else {
              window.location.href = '../../login.html'; 
            }
          },
          error: function() {
            console.error('Session check failed');
          }
        });
      }

      function addToCartInternal(productName, category, price, tinyImage) {
        $.ajax({
            type: 'POST',
            url: '../../backend/cartFunctions/addToCart.php',
            data: {
                productName: productName,
                category: category,
                price: price,
                tinyImage: tinyImage
            },
            success: function(response) {
                if (response.success) {
                    alert(response.message);
                } else {
                    alert(response.message);
                }
            },
            error: function() {
                console.error('Failed to add product to cart.');
            }
        });
      }

      function buyNow(productName, category, price, tinyImage){
        $.ajax({
            type: 'POST',
            url: '../../backend/cartFunctions/addToCart.php',
            data: {
                productName: productName,
                category: category,
                price: price,
                tinyImage: tinyImage
            },
            success: function(response) {
                if (response.success) {
                    window.location.href = '../../mycart.html';
                } else {
                    alert(response.message);
                }
            },
            error: function() {
                console.error('Failed to add product to cart.');
            }
        });
      }


      // function redirectToCart() {
      //     setTimeout(() => {
      //         window.location.href = '../../mycart.html';
      //     }, 500);
      // }

      // function redirectToBuyNow() {
      //     window.location.href = '../../mybuynow.html';
      // }
  </script>
</head>
<body>
    <header>
        <div class="logo">
          <img src="../../assets/images/logo.png" alt="">
          <h2>GeoInsight</h2>
        </div>
        <input type="checkbox" id="nav_check" hidden>
        <nav>
          <ul>
              <li>
                  <a href="../../index.html" class="active">Home</a>
              </li>
              <li>
                  <a href="../../aboutus.html">About Us</a>
              </li>
              <li>
                <a href="../../Page/page.html">Products</a>
              </li>
              <li>
                <a href="../../contactus.html">Contact Us</a>
              </li>
              <li>
                <a href="../../login.html">Login</a>
              </li>
              <li>
                <a href="../../cart.html" class="header-button">My Cart</a>
              </li>
          </ul>
      </nav>
        <label for="nav_check" class="hamburger">
            <div></div>
            <div></div>
            <div></div>
        </label>
    </header>
    
    <main>
      <!-- about us -->
      <div class="product-page">
        <div class="grid-container">
          <div>
            <img src="../../assets/images/product_images/indian_saree/1676316305547A.jpg" alt="" class="product-img">
          </div>
          <div class="product-info">
            <p class="product-category">
                Indian Saree
            </p>
            <h1 class="product-text">Phulkari Saree</h1>
            <div class="grid-two">
                <div>
                    <h1 class="product-price">&#8377; 2334</h1>
                </div>
                <div>
                    <del>&#8377; 2470</del>
                </div>
            </div>
            <hr>
            <h2 class="product-details-title">Product Details</h2>
            <ul class="product-description">
              <li style="display: flex; align-items: center;">
                <img src="../../assets/images/checked.png" style="height: 20px; width: 20px; margin-right: 5px;">
                Karvati kathi saree are pure handloom saree 
              </li>
            </ul>
            <br> <br> <br>
            <div class="grid-3">
              <div>
                <a href="../../mybuynow.html" target="_blank" class="buy-now">Buy Now</a>
              </div>
              <div>
                  <button onclick="addToCart('Phulkari Saree', 'Indian Saree', 2334)" class="add-to-cart">Add To Cart</button>
              </div>
            </div>
          </div>
        </div>
      </div>
   
      <br> <br> 

      <!-- footer -->
      <div class="footer">
        <div class="grid-footer">
          <div>
            <h1>GeoInsight</h1>
          </div>
          <div class="footer-pages">
            <a href="../../index.html">Home</a>
            <a href="../../aboutus.html">About Us</a>
            <a href="../../Page/page.html">Products</a>
            <a href="../../contactus.html">Contact Us</a>
            <a href="../../login.html">Login</a>
            <a href="../../mycart.html">My Cart</a>
          </div>
        </div>
        <hr class="footer-divider">
        <h2 class="footer-copyright">&copy; 2024 GeoInsight. All Rights Reserved.</h2>
      </div>
    </main>
</body>
</html>